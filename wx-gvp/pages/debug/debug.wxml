<navigation-bar title="调试信息" back="{{true}}" color="white" background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 登录状态 -->
    <view class="debug-section">
      <view class="section-title">登录状态</view>
      <view class="info-item">
        <text class="label">登录状态:</text>
        <text class="value {{isLogin ? 'success' : 'error'}}">{{isLogin ? '已登录' : '未登录'}}</text>
      </view>
      <view class="info-item">
        <text class="label">Token:</text>
        <text class="value token">{{tokenDisplay}}</text>
      </view>
      <view class="info-item">
        <text class="label">用户信息:</text>
        <text class="value">{{userInfoDisplay}}</text>
      </view>
    </view>

    <!-- 环境信息 -->
    <view class="debug-section">
      <view class="section-title">环境信息</view>
      <view class="info-item">
        <text class="label">当前环境:</text>
        <text class="value">{{currentEnv}}</text>
      </view>
      <view class="info-item">
        <text class="label">API地址:</text>
        <text class="value">{{baseUrl}}</text>
      </view>
    </view>

    <!-- 测试功能 -->
    <view class="debug-section">
      <view class="section-title">测试功能</view>
      <button class="test-btn" bindtap="parseToken">解析Token内容</button>
      <button class="test-btn" bindtap="testToken">测试Token有效性</button>
      <button class="test-btn" bindtap="testAllApis">测试所有API</button>
      <button class="test-btn" bindtap="testPatientApi">测试患者API</button>
      <button class="test-btn" bindtap="clearAllData">清除所有数据</button>
      <button class="test-btn" bindtap="forceLogout">强制退出登录</button>
    </view>

    <!-- 日志信息 -->
    <view class="debug-section" wx:if="{{logs.length > 0}}">
      <view class="section-title">操作日志</view>
      <view class="log-container">
        <view class="log-item" wx:for="{{logs}}" wx:key="index">
          <text class="log-time">{{item.time}}</text>
          <text class="log-content">{{item.content}}</text>
        </view>
      </view>
      <button class="test-btn" bindtap="clearLogs">清空日志</button>
    </view>
  </view>
</scroll-view>
