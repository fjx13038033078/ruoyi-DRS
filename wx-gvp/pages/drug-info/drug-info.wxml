<!--drug-info.wxml-->
<navigation-bar title="è¯å“ä¿¡æ¯" back="{{true}}" color="white" background="#667eea"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- æœç´¢æ  -->
    <view class="search-section">
      <view class="search-box">
        <text class="search-icon">ğŸ”</text>
        <input class="search-input" placeholder="æœç´¢è¯å“åç§°" value="{{searchKeyword}}" bindinput="onSearchInput" />
        <button class="search-btn" bindtap="handleSearch">æœç´¢</button>
      </view>
    </view>

    <!-- è¯å“åˆ—è¡¨ -->
    <view class="drug-list-section" wx:if="{{!loading && !error}}">
      <view class="section-header">
        <text class="section-title">è¯å“åˆ—è¡¨</text>
        <text class="section-subtitle">å…±{{drugList.length}}ç§è¯å“</text>
      </view>
      
      <view class="drug-list" wx:if="{{drugList.length > 0}}">
        <view class="drug-item" wx:for="{{drugList}}" wx:key="id">
          <view class="drug-image">
            <text class="drug-placeholder">ğŸ’Š</text>
          </view>
          <view class="drug-info">
            <text class="drug-name">{{item.drugName || item.name}}</text>
            <text class="drug-description">{{item.description}}</text>
            <text class="drug-indications" wx:if="{{item.indications}}">é€‚åº”ç—‡ï¼š{{item.indications}}</text>
            <text class="drug-precautions" wx:if="{{item.precautions}}">æ³¨æ„äº‹é¡¹ï¼š{{item.precautions}}</text>
          </view>
          <view class="drug-actions">
            <button class="action-btn detail-btn" bindtap="viewDrugDetail" data-drug="{{item}}">è¯¦æƒ…</button>
            <button class="action-btn instruction-btn" bindtap="viewDrugInstruction" data-drug="{{item}}">è¯´æ˜ä¹¦</button>
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{drugList.length === 0}}">
        <view class="empty-icon">ğŸ’Š</view>
        <text class="empty-title">æš‚æ— è¯å“ä¿¡æ¯</text>
        <text class="empty-desc">è¯·å°è¯•å…¶ä»–æœç´¢æ¡ä»¶</text>
      </view>
    </view>

    <!-- é”™è¯¯çŠ¶æ€ -->
    <view class="error-container" wx:if="{{!loading && error}}">
      <view class="error-icon">âš ï¸</view>
      <text class="error-title">åŠ è½½å¤±è´¥</text>
      <text class="error-desc">{{error}}</text>
      <button class="retry-btn" bindtap="retryLoad">é‡æ–°åŠ è½½</button>
    </view>
  </view>
</scroll-view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <view class="loading-spinner"></view>
  <text class="loading-text">æ­£åœ¨åŠ è½½è¯å“ä¿¡æ¯...</text>
</view>

<!-- è®¤è¯å¤±è´¥æç¤º -->
<auth-tip show="{{showAuthTip}}" bind:relogin="handleReLogin"></auth-tip>
